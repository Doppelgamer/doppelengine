// Generated by CoffeeScript 1.6.3
(function() {
  $(document).ready(function() {
    var onkey, ws, wsUrl;
    wsUrl = "ws://127.0.0.1:9000/test?username=jb";
    ws = new WebSocket(wsUrl);
    ws.onopen = function(evt) {
      return console.log("websocket opened");
    };
    ws.onmessage = function(evt) {
      console.log(evt.data);
      return $('#xpos').html(evt.data);
    };
    onkey = function(evt) {
      var cmd;
      cmd = {
        type: evt.type,
        data: evt.keyCode
      };
      return ws.send(JSON.stringify(cmd));
    };
    $('html').keydown(onkey);
    $('html').keyup(onkey);
    return $(window).unload(function(evt) {
      evt.type = 'keyup';
      evt.keyCode = '81';
      return onkey(evt);
    });
  });

}).call(this);
